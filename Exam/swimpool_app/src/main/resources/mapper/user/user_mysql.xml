<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mjc813.swimpool_app.user.service.UserMapper">
    <sql id="select">
        id
        , name
        , user_name
        , password
        , email
        , phone_number
        , role
        , max_lock
    </sql>
    <insert id="addUser" parameterType="UserDto" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO
            user_tbl( name
                    , user_name
                    , password
                    , email
                    , phone_number
                    , role )
        VALUES
            ( #{name}
            , #{userName}
            , #{password}
            , #{email}
            , #{phoneNumber}
            , #{role} )
    </insert>
    <select id="findAll" parameterType="UserDto" resultType="UserDto">
        SELECT
            <include refid="select"/>
        FROM
            user_tbl
        ORDER BY id DESC
    </select>
    <select id="findById" parameterType="Long" resultType="UserDto">
        SELECT
            <include refid="select"/>
        FROM
            user_tbl
        WHERE
            id = #{id}
        ORDER BY id DESC
    </select>
    <update id="updateUser" parameterType="UserDto">
        UPDATE
            user_tbl
        SET
            name = #{name}
          , user_name = #{userName}
          , password = #{password}
          , email = #{email}
          , phone_number = #{phoneNumber}
          , role = #{role}
        WHERE
            id = #{id}
    </update>
    <delete id="deleteUser" parameterType="Long">
        DELETE FROM
            user_tbl
        WHERE
            id = #{id}
    </delete>
</mapper>